<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../images/pitss.jpg" type="image/x-icon">
    <title>Men√∫ Interactivo - Pitts Bowling</title>
    <!-- Estilos espec√≠ficos del m√≥dulo Men√∫ -->
    <!-- Estilos espec√≠ficos del m√≥dulo Men√∫ -->
    <link rel="stylesheet" href="style.css?v=2">
    <link rel="stylesheet" href="../css/general.css">
    <link rel="stylesheet" href="../css/modal-carrito.css?v=3">
    <!-- modal-carrito.css REMOVED to prevent conflicts -->

    <!-- Leaflet CSS & JS -->
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https://*.tile.openstreetmap.org https://*.basemaps.cartocdn.com https://unpkg.com; connect-src 'self' http://localhost:3000;">

    <!-- Leaflet CSS & JS (LOCAL) -->
    <link rel="stylesheet" href="../lib/leaflet.css" />
    <script src="../lib/leaflet.js"></script>

</head>

<body>
    <!-- ===== HEADER ===== -->
    <header>
        <div class="container">
            <div class="logo">
                <img src="../images/logo.jpg" alt="">
                <span class="logo-text">Pitts<br>Bowling</span>
            </div>

            <div class="menu-toggle" id="mobile-menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>

            <nav id="main-nav">
                <ul>
                    <li><a href="../index.html">Inicio</a></li>
                    <li><a href="../reservaciones.html">Reservaciones</a></li>
                    <li><a href="menu.html" class="active">Menu</a></li>
                    <li><a href="../blog.html">Blog</a></li>
                </ul>
            </nav>

            <div class="header-actions">
                <div id="auth-container" class="auth-container">
                    <div id="guest-view" class="auth-view hidden">
                        <a href="../login.html" class="btn-auth btn-login">Iniciar Sesi√≥n</a>
                        <a href="../register.html" class="btn-auth btn-register">Registrarse</a>
                    </div>

                    <div id="user-view" class="auth-view hidden">
                        <div class="user-avatar-container" id="avatarBtn">
                            <div class="user-avatar" id="userInitial">U</div>
                        </div>
                        <div class="dropdown-menu hidden" id="userDropdown">
                            <div class="dropdown-header">
                                <span id="dropdownUser">Usuario</span>
                            </div>
                            <ul>
                                <li><a href="../dasboard.html">üìä Dashboard</a></li>
                                <li><a href="../perfil.html">‚öôÔ∏è Configuraci√≥n</a></li>
                                <li><a href="#" id="headerLogoutBtn" class="logout-item">üö™ Cerrar Sesi√≥n</a></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="social-icons-header">
                    <a href="#" class="social-facebook"><img src="../iconos/facebook_1.png" alt="Facebook"></a>
                    <a href="#" class="social-instagram"><img src="../iconos/instagram_1.png" alt="Instagram"></a>
                    <a href="#" class="social-twitter"><img src="../iconos/twitter_1.png" alt="Twitter"></a>
                    <a href="#" class="social-chat"><img src="../iconos/whatsapp_1.png" alt="WhatsApp"></a>
                </div>
            </div>
        </div>
    </header>

    <!-- ===== MAIN CONTENT ===== -->
    <main>
        <!-- Men√∫ lateral -->
        <div class="menu-lateral">
            <aside class="sidebar">
                <ul class="menu-categorias" id="lista-categorias">
                    <!-- Categor√≠as din√°micas -->
                </ul>
            </aside>
        </div>

        <!-- Contenido din√°mico -->
        <div class="content-dinamico">
            <!-- Carrusel de categor√≠as M√≥vil -->
            <div id="mobile-categories-container" class="mobile-categories-container">
                <div id="mobile-categories-scroll" class="mobile-categories-scroll">
                    <!-- Categor√≠as inyectadas via JS -->
                </div>
            </div>

            <!-- Secci√≥n de destacados -->
            <section id="section-destacados" class="contenido-menu hidden">
                <h2 class="tilt-cont-dina">Destacados</h2>
                <div id="lista-destacados" class="grid-comidas"></div>
            </section>

            <!-- Secci√≥n principal -->
            <section class="contenido-menu" id="contenido-menu">
                <h2 class="tilt-cont-dina">Selecciona una categor√≠a</h2>
                <div id="lista-comidas" class="grid-comidas"></div>
            </section>




            <div id="modal-factura" class="detalle hidden">
                <div class="detalle-contenido">
                    <h2>Resumen de tu Pedido</h2>
                    <div id="factura-items" class="factura-items-container">
                    </div>
                    <h3 id="factura-total" class="factura-total">Total: $0.00</h3>
                    <div class="detalle-acciones"
                        style="gap: 10px; display: flex; justify-content: center; align-items: center; width: 100%;">
                        <button id="btn-pagar" class="btn-agregar" style="flex: 1;">Pagar</button>
                        <button id="cerrar-modal-factura" class="cerrar-btn-footer">‚úï</button>
                    </div>
                </div>
            </div>

            <div id="modal-metodo-pago" class="detalle hidden">
                <div class="detalle-contenido">
                    <h2>Elige un M√©todo de Pago</h2>
                    <div class="detalle-acciones metodos-pago">
                        <button id="btn-ir-pago-movil" class="btn-metodo-pago">Pago M√≥vil</button>
                        <button id="btn-ir-transferencia" class="btn-metodo-pago">Transferencia Bancaria</button>
                        <button id="cerrar-modal-metodo" class="cerrar-btn-footer"
                            style="align-self: center; margin-top: 10px;">‚úï</button>
                    </div>
                </div>
            </div>

            <!-- NUEVO MODAL: TIPO DE SERVICIO -->
            <div id="modal-tipo-servicio" class="detalle hidden">
                <div class="detalle-contenido">
                    <h2>¬øComo deseas tu pedido?</h2>
                    <p style="color: #E0CEAC; margin-bottom: 20px;">Por favor selecciona una opci√≥n para continuar.</p>
                    <div class="detalle-acciones metodos-pago">
                        <button id="btn-servicio-local" class="btn-metodo-pago">Comer en el lugar</button>
                        <button id="btn-servicio-delivery" class="btn-metodo-pago">Delivery</button>
                        <button id="cerrar-modal-servicio" class="cerrar-btn-footer"
                            style="align-self: center; margin-top: 10px;">‚úï</button>
                    </div>

                    <!-- (SECCI√ìN DE MAPA ELIMINADA DE AQU√ç, MOVIDA A SU PROPIO MODAL) -->
                </div>
            </div>

            <!-- NUEVO MODAL: MAPA DE DELIVERY -->
            <div id="modal-delivery-map" class="detalle hidden">
                <div class="detalle-contenido">
                    <h2>Ubicaci√≥n de Entrega</h2>
                    <p class="desc-text">Confirma tu ubicaci√≥n exacta.</p>

                    <!-- WRAPPER CON SCROLL (Mapa + Controles) -->
                    <div id="map-scroll-wrapper" class="pago-body-scroll">
                        <div id="map-controls" style="margin-bottom:10px;">
                            <button id="btn-geo-nav" class="btn-agregar">Usar mi ubicaci√≥n actual</button>
                        </div>

                        <div id="mapa-delivery"></div>
                    </div>

                    <!-- FOOTER FIJO (Info + Botones) -->
                    <div class="detalle-acciones" style="flex-direction: column; gap: 10px; margin-top: 10px;">
                        <div id="delivery-info-container" class="hidden" style="width: 100%;">
                            <div class="delivery-compact-info">
                                <p class="delivery-dist-text">Dist: <span id="del-distancia">0</span> km</p>
                                <p class="delivery-cost-text">Env√≠o: <strong>$<span id="del-costo">0.00</span></strong>
                                </p>
                            </div>
                            <p id="del-status-text"></p>
                            <button id="btn-confirmar-delivery" class="btn-agregar" style="width: 100%;">Confirmar y
                                Pagar</button>
                        </div>

                        <div class="map-footer-wrapper" style="text-align: center;">
                            <button id="cerrar-modal-mapa" class="cerrar-btn-footer"
                                style="align-self: center;">‚úï</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="modal-pago-movil" class="detalle hidden">
                <div class="detalle-contenido detalle-contenido-pago">
                    <h2>Datos para Pago M√≥vil</h2>

                    <div class="pago-body-scroll">
                        <div class="datos-pago">
                            <p><strong>C√©dula:</strong> 27263686</p>
                            <p><strong>Tel√©fono:</strong> 0424-6117224</p>
                            <p><strong>Banco:</strong> Venezuela</p>
                        </div>
                        <div class="form-group">
                            <label for="pago-movil-ref">Referencia del Pago:</label>
                            <input type="text" id="pago-movil-ref" placeholder="Introduce el N¬∞ de referencia">
                        </div>
                        <div class="form-group">
                            <label for="pago-movil-capture">Capture del Pago:</label>
                            <input type="file" id="pago-movil-capture" accept="image/*">
                            <div class="total-pago-container">
                                <h3 class="modal-total-display" id="pm-total-display">Total a Pagar: $0.00</h3>
                                <div class="tasa-info">
                                    <span>Tasa BCV: <span class="tasa-valor">0.00</span> Bs/$</span>
                                    <span class="total-bs-display">Total: <span id="pm-total-bs">0.00</span> Bs.</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="detalle-acciones"
                        style="gap: 10px; display: flex; justify-content: center; align-items: center; width: 100%;">
                        <button id="btn-submit-pago-movil" class="btn-agregar" style="flex: 1;">Ya Pagu√©</button>
                        <button id="cerrar-modal-pago-movil" class="cerrar-btn-footer">‚úï</button>
                    </div>
                </div>
            </div>

            <div id="modal-transferencia" class="detalle hidden">
                <div class="detalle-contenido detalle-contenido-pago">
                    <h2>Datos para Transferencia</h2>

                    <div class="pago-body-scroll">
                        <div class="datos-pago">
                            <p><strong>Empresa:</strong> PITTS BOWLIN</p>
                            <p><strong>RIF:</strong> J272636866</p>
                            <p><strong>Banco:</strong> Venezuela</p>
                            <p><strong>Cuenta:</strong> 01020329580000990411</p>
                        </div>
                        <div class="form-group">
                            <label for="transfer-ref">Referencia del Pago:</label>
                            <input type="text" id="transfer-ref" placeholder="Introduce el N¬∞ de referencia">
                        </div>
                        <div class="form-group">
                            <label for="transfer-capture">Capture del Pago:</label>
                            <input type="file" id="transfer-capture" accept="image/*">
                            <div class="total-pago-container">
                                <h3 class="modal-total-display" id="trans-total-display">Total a Pagar: $0.00</h3>
                                <div class="tasa-info">
                                    <span>Tasa BCV: <span class="tasa-valor">0.00</span> Bs/$</span>
                                    <span class="total-bs-display">Total: <span id="trans-total-bs">0.00</span>
                                        Bs.</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="detalle-acciones"
                        style="gap: 10px; display: flex; justify-content: center; align-items: center; width: 100%;">
                        <button id="btn-submit-transfer" class="btn-agregar" style="flex: 1;">Ya Pagu√©</button>
                        <button id="cerrar-modal-transfer" class="cerrar-btn-footer">‚úï</button>
                    </div>
                </div>
            </div>

            <div id="modal-verificacion" class="detalle hidden">
                <div class="detalle-contenido">
                    <h2>Pago en Proceso</h2>
                    <p>Tu pago se est√° verificando, le notificaremos al verificarse. ¬°Est√© atento!</p>
                    <button id="cerrar-modal-verificacion" class="btn-agregar">Aceptar</button>
                </div>
            </div>

        </div>

    </main>

    <footer>
        <div class="container">
            <div class="footer-col">
                <h3>Bolos de Pitts</h3>
                <p>El mejor centro de bowling de la ciudad. Disfruta de una experiencia √∫nica con pistas modernas,
                    ambiente familiar y diversi√≥n garantizada.</p><br>
                <div class="socials">
                    <a href="#">
                        <img src="../iconos/facebook_1.png" alt="Facebook 3">
                        <img src="../iconos/facebook_2.png" alt="Facebook 2">
                    </a>
                    <a href="#">
                        <img src="../iconos/instagram_1.png" alt="Instagram 3">
                        <img src="../iconos/instagram_2.png" alt="Instagram 2">
                    </a>
                    <a href="#">
                        <img src="../iconos/twitter_1.png" alt="Twitter 3">
                        <img src="../iconos/twitter_2.png" alt="Twitter 2">
                    </a>
                </div>
            </div>
            <div class="footer-col">
                <h3>Enlaces R√°pidos</h3>
                <ul>
                    <li><a href="../index.html">Inicio</a></li>
                    <li><a href="../reservaciones.html">Reservaciones</a></li>
                    <li><a href="menu.html">Menu</a></li>
                    <li><a href="../blog.html">Blog</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h3>Nuestros Servicios</h3>
                <ul>
                    <li>Pistas de Bowling</li>
                    <li>Fiestas de Cumplea√±os</li>
                    <li>Eventos Corporativos</li>
                    <li>Torneos</li>
                    <li>Clases de Bowling</li>
                    <li>Alquiler de Zapatos</li>
                    <li>Comida y Bebidas</li>
                    <li>Membres√≠as VIP</li>
                </ul>
            </div>
            <div class="footer-col">
                <h3>Contacto</h3>
                <p>üìç 123 Bowling Street, Ciudad Central, CP 12345</p><br>
                <p>üìû (555) 123-4567</p><br>
                <p>‚úâÔ∏è info@pittsbowling.com</p><br>
                <p><strong>üïìHorarios de Atenci√≥n</strong></p>
                <p>Lunes - Viernes: 10:00 AM - 11:00 PM</p>
                <p>S√°bados: 9:00 AM - 12:00 AM</p>
                <p>Domingos: 10:00 AM - 10:00 PM</p>
                <p>Feriados: 12:00 p. m. - 8:00 p. m.</p>
            </div>
        </div>
    </footer>

    <div class="footer-bottom">
        <div class="container">
            <p>¬© Pitts Bowling 2025. Todos los derechos reservados.</p>
            <div class="footer-links">
                <a href="../politica-privacidad.html">Pol√≠tica de Privacidad</a>
                <a href="../terminos-servicio.html">T√©rminos de Servicio</a>
            </div>
        </div>
    </div>

    <div class="developers-section" id="developers-section">
        <button class="developers-toggle">
            <> Desarrolladores <span class="arrow">^</span>
        </button>
        <div class="developers-info">
            <div class="container">
                <div class="dev-header">
                    <h3 id="dev-team-title">
                        <> Equipo de Desarrollo
                    </h3>
                </div>
                <div class="dev-cards">
                    <div class="dev-card">
                        <h4>Eduardo Flores</h4>
                        <p>Desarrollador Backend</p>
                        <p>‚úâÔ∏è wittysoftt@gmail.com</p>
                    </div>
                    <div class="dev-card">
                        <h4>Randy Rodr√≠guez</h4>
                        <p>Dise√±ador UI/UX</p>
                        <p>Desarrollador Full Stack</p>
                        <p>‚úâÔ∏è wittysoftt@gmail.com</p>
                    </div>
                    <div class="dev-card">
                        <h4>Freddy Valbuena</h4>
                        <p>Desarrollador en Frontend</p>
                        <p>‚úâÔ∏è wittysoftt@gmail.com</p>
                    </div>
                </div>
                <div class="dev-footer">
                    <p>¬øNecesitas un sitio web profesional? Cont√°ctanos para tu pr√≥ximo proyecto.</p>
                </div>
            </div>
        </div>
    </div>

    </main>

    <div class="floating-buttons">
        <a href="#" class="fab chat-fab">
            <img src="../gifs/Saludando.gif" alt="Chat" />
        </a>
        <a href="#" id="carrito-flotante" class="fab carrito-flotante-btn hidden" style="z-index:1002;">
            <span id="carrito-count">0</span> üõí
        </a>
        <a href="#" id="scrollToTopBtn" class="fab scroll-top-fab">‚Üë</a>
    </div>

    <div class="chatbot-container" id="chatbotContainer">
        <div class="chatbot-header">
            <img src="../gifs/Saludando.gif" alt="Lia" class="avatar">
            <h4>CHATEA CON FABI</h4>
        </div>
        <div class="chatbot-messages" id="chatbotMessages">
            <div class="message bot-message">
                <img src="../gifs/Hablando.gif" alt="FABI" class="avatar">
                <p>¬°Hola! Soy FABI la asistente de Pitts Bowling. ¬øEn qu√© puedo ayudarte?</p>
            </div>
        </div>
        <div class="chatbot-input">
            <input type="text" id="chatInput" placeholder="Escribe tu mensaje...">
            <button id="chatSendBtn">Enviar</button>
        </div>
    </div>

    <!-- Detalle de comida (MODAL - Root Level) -->
    <section id="detalle-comida" class="detalle hidden">
        <!-- Imagen Circular (Saliendo de pantalla) -->
        <div class="detalle-imagen">
            <img id="detalle-img" src="" alt="Comida seleccionada">
        </div>

        <!-- Controles Apilados (Arriba - Cerrar - Abajo) -->
        <div class="detalle-controles">
            <button id="prev-btn" class="carrusel-arrow" title="Anterior">‚ñ≤</button>
            <button id="cerrar-detalle" class="cerrar-btn" title="Cerrar">‚úï</button>
            <button id="next-btn" class="carrusel-arrow" title="Siguiente">‚ñº</button>
        </div>

        <!-- Panel de Informaci√≥n -->
        <div class="detalle-contenido">
            <div class="detalle-info">
                <h2 id="detalle-nombre"></h2>

                <div class="detalle-tamanos">
                    <h4>Tama√±os disponibles:</h4>
                    <form id="form-tamanos">
                        <div id="detalle-tamanos"></div>
                    </form>
                </div>

                <div class="detalle-extras-wrapper">
                    <h4>Extras disponibles:</h4>
                    <div id="detalle-extras"></div>
                </div>

                <h5>Descripci√≥n:</h5>
                <p id="detalle-descripcion"></p>
            </div>

            <!-- Acciones -->
            <div class="detalle-acciones">
                <div class="cantidad-selector">
                    <button type="button" id="cantidad-menos">-</button>
                    <input type="number" id="cantidad" value="1" min="1">
                    <button type="button" id="cantidad-mas">+</button>
                </div>
                <button id="btn-agregar-carrito" class="btn-agregar">üõí Agregar</button>
            </div>
        </div>

        <!-- Carrusel Orbital (Items) -->
        <div class="detalle-carrusel">
            <div class="carrusel-items" id="carrusel"></div>
        </div>
    </section>

    <!-- Detalle de CARRITO (ESTILO ORIGINAL RESTAURADO) -->
    <section id="detalle-carrito" class="detalle hidden">
        <div class="detalle-contenido detalle-contenido-carrito"> <!-- Clase original + Modificador -->
            <h2>Tu Pedido</h2>

            <!-- Contenedor con scroll para evitar que se rompa -->
            <!-- Contenedor con scroll para evitar que se rompa -->
            <div id="lista-carrito-wrapper">
                <div id="lista-carrito">
                    <!-- Se llena con JS -->
                </div>
            </div>

            <div class="detalle-acciones">
                <div class="carrito-total">
                    <span>Total:</span>
                    <strong id="carrito-total-monto">$0.00</strong>
                </div>
                <!-- Botones Abajo (Confirmar + X) -->
                <div
                    style="display: flex; gap: 10px; width: 100%; justify-content: center; align-items: center; margin-top: 10px;">
                    <button id="confirmar-pedido" class="btn-agregar" style="flex: 1;">Confirmar Pedido</button>
                    <button id="cerrar-carrito" class="cerrar-btn-footer" title="Cerrar">‚úï</button>
                </div>
            </div>
        </div>
    </section>

    <!-- JS -->
    <script src="../js/carrito-modal.js"></script>
    <script src="script.js"></script>
    <script src="../js/general.js"></script>
    <script src="../js/header-auth.js"></script>

</body>

</html>